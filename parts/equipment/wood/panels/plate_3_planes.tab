BEGIN_ASM_DESCR

SEARCH_MDL_PARAM THIS D_1 D_1
SEARCH_MDL_PARAM THIS D_2 D_2
SEARCH_MDL_PARAM THIS D_3 D_3
SEARCH_MDL_PARAM THIS T T

IF_1 ELEM_NEW
  SEARCH_FEAT_PARAM COMP_FEAT ATTACH_OPTION ATTACH_OPTION
  CONFIG_ELEM
END_IF_1

IF_2 ELEM_EXIST
  SEARCH_FEAT_PARAM COMP_FEAT ATTACH_OPTION ATTACH_OPTION
  CONFIG_ELEM_EXIST
END_IF_2


SEARCH_MDL_PARAM_OPTIONAL THIS MINUS_T_HALF MINUS_T_HALF


IF_3 PARAM_VALID MINUS_T_HALF

SEARCH_MDL_REF THIS CSYS CS_FRONT COMP_CSYS

IF_31 PARAM_EQUAL ATTACH_OPTION 1
  SEARCH_MDL_PARAM THIS PARAM_0 Z_OFF
END_IF_31

IF_32 PARAM_EQUAL ATTACH_OPTION 2
  SEARCH_MDL_PARAM THIS MINUS_T_HALF Z_OFF
END_IF_32

IF_33 PARAM_EQUAL ATTACH_OPTION 3
  SEARCH_MDL_PARAM THIS MINUS_T Z_OFF
END_IF_33


CREATE_UDF ref_csys_measure_3_planes_2 ASSEMBLY PLACEMENT_REF_UDF
  UDF_DIM Z_OFF Z_OFF
  UDF_REF PLANE_1 PLANE_1 
  UDF_REF PLANE_2 PLANE_2
  UDF_REF PLANE_3 PLANE_3
  UDF_REF ATTACH_PLANE ATTACH_PLANE
  UDF_EXP_REF REF_CSYS CSYS 2
  UDF_EXP_PARAM X1 X1
  UDF_EXP_PARAM X2 X2
  UDF_EXP_PARAM Y2 Y2
END_CREATE_UDF


REGEN_MDL THIS

ASSEMBLE THIS_MEASURECOPY
  PLACEMENT_REF_UDF X1 X2 Y2
  CSYS REF_CSYS COMP_CSYS
END_ASSEMBLE

SET_FEAT_PARAM COMP_FEAT ATTACH_OPTION ATTACH_OPTION

END_IF_3



IF_4 PARAM_INVALID MINUS_T_HALF

SEARCH_MDL_REF THIS CSYS CS_FRONT COMP_CSYS

IF_41 PARAM_EQUAL ATTACH_OPTION 1
  SEARCH_MDL_REF THIS CSYS CS_FRONT COMP_CSYS
END_IF_41

IF_42 PARAM_EQUAL ATTACH_OPTION 2
  SEARCH_MDL_REF THIS CSYS CS_CENTER COMP_CSYS
END_IF_42

IF_45 PARAM_EQUAL ATTACH_OPTION 3
  SEARCH_MDL_REF THIS CSYS CS_BACK COMP_CSYS
END_IF_45

CREATE_UDF ref_csys_measure_3_planes ASSEMBLY PLACEMENT_REF_UDF
  UDF_REF PLANE_1 PLANE_1 
  UDF_REF PLANE_2 PLANE_2
  UDF_REF PLANE_3 PLANE_3
  UDF_REF ATTACH_PLANE ATTACH_PLANE
  UDF_EXP_REF REF_CSYS CSYS 1
  UDF_EXP_PARAM X1 X1
  UDF_EXP_PARAM X2 X2
  UDF_EXP_PARAM Y2 Y2
END_CREATE_UDF

REGEN_MDL THIS

ASSEMBLE THIS_MEASURECOPY
  PLACEMENT_REF_UDF X1 X2 Y2
  CSYS REF_CSYS COMP_CSYS
END_ASSEMBLE

END_IF_4

END_ASM_DESCR



BEGIN_GUI_DESCR

GLOBAL_PICTURE plate_3_planes_tab.png

USER_SELECT FACE PLANE_1 1
USER_SELECT FACE PLANE_2 2
USER_SELECT FACE PLANE_3 3
USER_SELECT FACE ATTACH_PLANE 4

USER_INPUT_PARAM DOUBLE T
USER_INPUT_PARAM DOUBLE D_1
USER_INPUT_PARAM DOUBLE D_2
USER_INPUT_PARAM DOUBLE D_3
USER_INPUT_PARAM DOUBLE ATTACH_OPTION 1

END_GUI_DESCR


BEGIN_GUI_DESCR_EXIST

GLOBAL_PICTURE plate_3_planes_tab.png

USER_SELECT FACE PLANE_1 1
USER_SELECT FACE PLANE_2 2
USER_SELECT FACE PLANE_3 3
USER_SELECT FACE ATTACH_PLANE 4

USER_INPUT_PARAM DOUBLE ATTACH_OPTION

END_GUI_DESCR_EXIST


BEGIN_GUI_DESCR_MODIFY

GLOBAL_PICTURE plate_3_planes_tab.png

USER_INPUT_PARAM DOUBLE T
USER_INPUT_PARAM DOUBLE D_1
USER_INPUT_PARAM DOUBLE D_2
USER_INPUT_PARAM DOUBLE D_3
USER_INPUT_PARAM_INACTIVE_MODIFY_ALL DOUBLE ATTACH_OPTION

END_GUI_DESCR_MODIFY


